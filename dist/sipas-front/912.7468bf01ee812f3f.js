"use strict";(self.webpackChunksipas_front=self.webpackChunksipas_front||[]).push([[912],{6912:(T,h,m)=>{m.r(h),m.d(h,{USERS_ROUTES:()=>R});var c=m(177),a=m(4341),g=m(4008),u=m(5222),d=m(5134);const f=(0,d.UX)("users"),p=(0,d.Mz)(f,n=>n.users),F=(0,d.Mz)(f,n=>n.selectedUser),_=(0,d.Mz)(f,n=>n.loading),C=(0,d.Mz)(f,n=>n.error);(0,d.Mz)(p,n=>n.length),(0,d.Mz)(p,n=>n.filter(s=>s.isActive)),(0,d.Mz)(p,n=>n.filter(s=>!s.isActive));var e=m(4438);const k=(n,s)=>({"badge-success":n,"badge-danger":s});function v(n,s){1&n&&(e.j41(0,"div",9)(1,"p"),e.EFF(2,"Carregando usu\xe1rios..."),e.k0s()())}function E(n,s){if(1&n&&(e.j41(0,"div",10),e.EFF(1),e.k0s()),2&n){const t=s.ngIf;e.R7$(),e.SpI(" ",t," ")}}function U(n,s){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"span",13),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.nI1(12,"date"),e.k0s(),e.j41(13,"td",14)(14,"button",15),e.EFF(15," \u270e Editar "),e.k0s(),e.j41(16,"button",16),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.toggleUserStatus(o))}),e.EFF(17),e.k0s(),e.j41(18,"button",17),e.bIt("click",function(){const o=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.deleteUser(o.id))}),e.EFF(19," \u{1f5d1} Deletar "),e.k0s()()()}if(2&n){const t=s.$implicit;e.R7$(2),e.SpI("#",t.id,""),e.R7$(2),e.JRh(t.email),e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("ngClass",e.l_i(12,k,t.isActive,!t.isActive)),e.R7$(),e.SpI(" ",t.isActive?"Ativo":"Inativo"," "),e.R7$(2),e.JRh(t.lastLogin?e.i5U(12,9,t.lastLogin,"dd/MM/yyyy HH:mm"):"Nunca"),e.R7$(3),e.Mz_("routerLink","/users/",t.id,"/edit"),e.R7$(3),e.SpI(" ",t.isActive?"\u2713 Desativar":"\u2717 Ativar"," ")}}function y(n,s){if(1&n&&(e.j41(0,"table",11)(1,"thead")(2,"tr")(3,"th"),e.EFF(4,"ID"),e.k0s(),e.j41(5,"th"),e.EFF(6,"Email"),e.k0s(),e.j41(7,"th"),e.EFF(8,"Nome"),e.k0s(),e.j41(9,"th"),e.EFF(10,"Status"),e.k0s(),e.j41(11,"th"),e.EFF(12,"\xdaltimo Acesso"),e.k0s(),e.j41(13,"th"),e.EFF(14,"A\xe7\xf5es"),e.k0s()()(),e.j41(15,"tbody"),e.DNE(16,U,20,15,"tr",12),e.k0s()()),2&n){const t=e.XpG();e.R7$(16),e.Y8G("ngForOf",t.filteredUsers)}}function O(n,s){1&n&&(e.j41(0,"div",18)(1,"p"),e.EFF(2,"Nenhum usu\xe1rio encontrado"),e.k0s()())}let j=(()=>{class n{constructor(t){this.store=t,this.filteredUsers=[],this.searchTerm="",this.users$=this.store.select(p),this.loading$=this.store.select(_),this.error$=this.store.select(C)}ngOnInit(){this.store.dispatch(u.Ti()),this.users$.subscribe(t=>{this.filteredUsers=t})}onSearch(){this.users$.subscribe(t=>{const r=this.searchTerm.toLowerCase();this.filteredUsers=t.filter(o=>o.email.toLowerCase().includes(r)||o.name.toLowerCase().includes(r))})}deleteUser(t){confirm("Tem certeza que deseja deletar este usu\xe1rio?")&&this.store.dispatch(u.hG({id:t}))}toggleUserStatus(t){this.store.dispatch(t.isActive?u.Wi({id:t.id}):u.He({id:t.id}))}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(d.il))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-users-list"]],standalone:!0,features:[e.aNF],decls:16,vars:11,consts:[["noData",""],[1,"container"],[1,"header"],["routerLink","/users/create",1,"btn","btn-primary"],[1,"search-box"],["type","text","placeholder","Buscar por email ou nome...",1,"search-input",3,"ngModelChange","ngModel"],["class","spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","data-table",4,"ngIf","ngIfElse"],[1,"spinner"],[1,"alert","alert-danger"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"actions"],["title","Editar",1,"btn-sm","btn-info",3,"routerLink"],["title","Ativar/Desativar",1,"btn-sm","btn-warning",3,"click"],["title","Deletar",1,"btn-sm","btn-danger",3,"click"],[1,"no-data"]],template:function(r,o){if(1&r){const i=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h1"),e.EFF(3,"Cadastro de Usu\xe1rios"),e.k0s(),e.j41(4,"button",3),e.EFF(5,"+ Novo Usu\xe1rio"),e.k0s()(),e.j41(6,"div",4)(7,"input",5),e.mxI("ngModelChange",function(b){return e.eBV(i),e.DH7(o.searchTerm,b)||(o.searchTerm=b),e.Njj(b)}),e.bIt("ngModelChange",function(){return e.eBV(i),e.Njj(o.onSearch())}),e.k0s()(),e.DNE(8,v,3,0,"div",6),e.nI1(9,"async"),e.DNE(10,E,2,1,"div",7),e.nI1(11,"async"),e.DNE(12,y,17,1,"table",8),e.nI1(13,"async"),e.DNE(14,O,3,0,"ng-template",null,0,e.C5r),e.k0s()}if(2&r){const i=e.sdS(15);e.R7$(7),e.R50("ngModel",o.searchTerm),e.R7$(),e.Y8G("ngIf",e.bMT(9,5,o.loading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(11,7,o.error$)),e.R7$(2),e.Y8G("ngIf",e.bMT(13,9,o.users$))("ngIfElse",i)}},dependencies:[c.MD,c.YU,c.Sq,c.bT,c.Jj,c.vh,a.YN,a.me,a.BC,a.vS,g.Wk],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.search-box[_ngcontent-%COMP%]{margin-bottom:2rem}.search-input[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 1px 3px #0000001a;border-radius:4px;overflow:hidden}thead[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom:2px solid #ddd}th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;color:#333}td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #eee}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:12px;font-weight:500}.badge-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.badge-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:12px;border:none;border-radius:4px;cursor:pointer;transition:all .3s}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496}.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#333}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#e0a800}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem}.no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}"]})}}return n})();function I(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"label",15),e.EFF(2,"Senha *"),e.k0s(),e.j41(3,"input",16),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.form.password,o)||(i.form.password=o),e.Njj(o)}),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(3),e.R50("ngModel",t.form.password)}}function x(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"label",17)(2,"input",18),e.mxI("ngModelChange",function(o){e.eBV(t);const i=e.XpG();return e.DH7(i.form.isActive,o)||(i.form.isActive=o),e.Njj(o)}),e.k0s(),e.EFF(3," Usu\xe1rio Ativo "),e.k0s()()}if(2&n){const t=e.XpG();e.R7$(2),e.R50("ngModel",t.form.isActive)}}function P(n,s){if(1&n&&(e.j41(0,"div",19),e.EFF(1),e.k0s()),2&n){const t=s.ngIf;e.R7$(),e.SpI(" ",t," ")}}let M=(()=>{class n{constructor(t,r,o){this.store=t,this.route=r,this.router=o,this.isEdit=!1,this.form={email:"",name:"",password:"",isActive:!0},this.userId=null,this.loading$=this.store.select(_),this.error$=this.store.select(C)}ngOnInit(){this.route.params.subscribe(t=>{t.id&&(this.isEdit=!0,this.userId=+t.id,this.userId&&this.store.dispatch(u.SN({id:this.userId})),this.store.select(F).subscribe(r=>{r&&(this.form={email:r.email,name:r.name,password:"",isActive:r.isActive})}))})}onSubmit(){if(this.form.email&&this.form.name){if(this.isEdit&&this.userId)this.store.dispatch(u.TK({id:this.userId,user:{email:this.form.email,name:this.form.name,isActive:this.form.isActive}}));else{if(!this.form.password)return void alert("Senha \xe9 obrigat\xf3ria para novo usu\xe1rio");this.store.dispatch(u.kg({user:{email:this.form.email,name:this.form.name,password:this.form.password}}))}setTimeout(()=>{this.router.navigate(["/users"])},1e3)}else alert("Email e Nome s\xe3o obrigat\xf3rios")}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(d.il),e.rXU(g.nX),e.rXU(g.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-users-form"]],standalone:!0,features:[e.aNF],decls:27,vars:15,consts:[[1,"container"],[1,"form-header"],["routerLink","/users",1,"btn","btn-secondary"],[1,"form-card"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","usuario@example.com","required","",3,"ngModelChange","ngModel","disabled"],["for","name"],["type","text","id","name","name","name","placeholder","Jo\xe3o Silva","required","",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","routerLink","/users",1,"btn","btn-secondary"],["class","alert alert-danger",4,"ngIf"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel"],["for","isActive"],["type","checkbox","id","isActive","name","isActive",3,"ngModelChange","ngModel"],[1,"alert","alert-danger"]],template:function(r,o){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3),e.k0s(),e.j41(4,"button",2),e.EFF(5,"\u2190 Voltar"),e.k0s()(),e.j41(6,"div",3)(7,"form",4),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(8,"div",5)(9,"label",6),e.EFF(10,"Email *"),e.k0s(),e.j41(11,"input",7),e.mxI("ngModelChange",function(l){return e.DH7(o.form.email,l)||(o.form.email=l),l}),e.k0s()(),e.j41(12,"div",5)(13,"label",8),e.EFF(14,"Nome *"),e.k0s(),e.j41(15,"input",9),e.mxI("ngModelChange",function(l){return e.DH7(o.form.name,l)||(o.form.name=l),l}),e.k0s()(),e.DNE(16,I,4,1,"div",10)(17,x,4,1,"div",10),e.j41(18,"div",11)(19,"button",12),e.nI1(20,"async"),e.EFF(21),e.nI1(22,"async"),e.k0s(),e.j41(23,"button",13),e.EFF(24," Cancelar "),e.k0s()()(),e.DNE(25,P,2,1,"div",14),e.nI1(26,"async"),e.k0s()()),2&r&&(e.R7$(3),e.JRh(o.isEdit?"Editar Usu\xe1rio":"Novo Usu\xe1rio"),e.R7$(8),e.R50("ngModel",o.form.email),e.Y8G("disabled",o.isEdit),e.R7$(4),e.R50("ngModel",o.form.name),e.R7$(),e.Y8G("ngIf",!o.isEdit),e.R7$(),e.Y8G("ngIf",o.isEdit),e.R7$(2),e.Y8G("disabled",e.bMT(20,9,o.loading$)),e.R7$(2),e.SpI(" ",e.bMT(22,11,o.loading$)?"Salvando...":"Salvar"," "),e.R7$(4),e.Y8G("ngIf",e.bMT(26,13,o.error$)))},dependencies:[c.MD,c.bT,c.Jj,a.YN,a.qT,a.me,a.Zm,a.BC,a.cb,a.YS,a.vS,a.cV,g.Wk],styles:[".container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.form-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s}input[type=text][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 3px #1976d21a}input[type=text][_ngcontent-%COMP%]:disabled, input[type=email][_ngcontent-%COMP%]:disabled, input[type=password][_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem;cursor:pointer}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.alert-danger[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px}"]})}}return n})();const R=[{path:"",component:j},{path:"create",component:M},{path:":id/edit",component:M}]}}]);