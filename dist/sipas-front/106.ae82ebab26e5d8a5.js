"use strict";(self.webpackChunksipas_front=self.webpackChunksipas_front||[]).push([[106],{2106:($,F,l)=>{l.r(F),l.d(F,{UNITS_ROUTES:()=>x});var d=l(177),a=l(4341),g=l(4008),m=l(5134);const f=e=>e.units,u=(0,m.Mz)(f,e=>e.units),C=(0,m.Mz)(f,e=>e.selectedUnit),h=(0,m.Mz)(f,e=>e.loading),_=(0,m.Mz)(f,e=>e.error);(0,m.Mz)(u,e=>e.length);var p=l(802),t=l(4438);const y=(e,s)=>({"badge-success":e,"badge-gray":s});function k(e,s){1&e&&(t.j41(0,"div",9)(1,"p"),t.EFF(2,"Carregando unidades..."),t.k0s()())}function E(e,s){if(1&e&&(t.j41(0,"div",10),t.EFF(1),t.k0s()),2&e){const n=s.ngIf;t.R7$(),t.SpI(" ",n," ")}}function j(e,s){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.j41(11,"td")(12,"span",13),t.EFF(13),t.k0s()(),t.j41(14,"td",14)(15,"button",15),t.EFF(16," \u270e Editar "),t.k0s(),t.j41(17,"button",16),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(2);return t.Njj(c.deleteUnit(o.id))}),t.EFF(18," \u{1f5d1} Deletar "),t.k0s()()()}if(2&e){const n=s.$implicit;t.R7$(2),t.SpI("#",n.id,""),t.R7$(2),t.JRh(n.name),t.R7$(2),t.JRh(n.type),t.R7$(2),t.JRh(n.city),t.R7$(2),t.JRh(n.state),t.R7$(2),t.Y8G("ngClass",t.l_i(9,y,n.isArmored,!n.isArmored)),t.R7$(),t.SpI(" ",n.isArmored?"Sim":"N\xe3o"," "),t.R7$(2),t.Mz_("routerLink","/units/",n.id,"/edit")}}function O(e,s){if(1&e&&(t.j41(0,"table",11)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"ID"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Nome"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Tipo"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Cidade"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Estado"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Blindada"),t.k0s(),t.j41(15,"th"),t.EFF(16,"A\xe7\xf5es"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,j,19,12,"tr",12),t.k0s()()),2&e){const n=t.XpG();t.R7$(18),t.Y8G("ngForOf",n.filteredUnits)}}function U(e,s){1&e&&(t.j41(0,"div",17)(1,"p"),t.EFF(2,"Nenhuma unidade encontrada"),t.k0s()())}let P=(()=>{class e{constructor(n){this.store=n,this.filteredUnits=[],this.searchTerm="",this.units$=this.store.select(u),this.loading$=this.store.select(h),this.error$=this.store.select(_)}ngOnInit(){this.store.dispatch(p.wV()),this.units$.subscribe(n=>{this.filteredUnits=n})}onSearch(){this.units$.subscribe(n=>{const i=this.searchTerm.toLowerCase();this.filteredUnits=n.filter(o=>o.city.toLowerCase().includes(i)||o.name.toLowerCase().includes(i)||o.type.toLowerCase().includes(i))})}deleteUnit(n){confirm("Tem certeza que deseja deletar esta unidade?")&&this.store.dispatch(p.Go({id:n}))}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(m.il))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-units-list"]],standalone:!0,features:[t.aNF],decls:16,vars:11,consts:[["noData",""],[1,"container"],[1,"header"],["routerLink","/units/create",1,"btn","btn-primary"],[1,"search-box"],["type","text","placeholder","Buscar por cidade...",1,"search-input",3,"ngModelChange","ngModel"],["class","spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","data-table",4,"ngIf","ngIfElse"],[1,"spinner"],[1,"alert","alert-danger"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"actions"],["title","Editar",1,"btn-sm","btn-info",3,"routerLink"],["title","Deletar",1,"btn-sm","btn-danger",3,"click"],[1,"no-data"]],template:function(i,o){if(1&i){const c=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"h1"),t.EFF(3,"Cadastro de Unidades"),t.k0s(),t.j41(4,"button",3),t.EFF(5,"+ Nova Unidade"),t.k0s()(),t.j41(6,"div",4)(7,"input",5),t.mxI("ngModelChange",function(b){return t.eBV(c),t.DH7(o.searchTerm,b)||(o.searchTerm=b),t.Njj(b)}),t.bIt("ngModelChange",function(){return t.eBV(c),t.Njj(o.onSearch())}),t.k0s()(),t.DNE(8,k,3,0,"div",6),t.nI1(9,"async"),t.DNE(10,E,2,1,"div",7),t.nI1(11,"async"),t.DNE(12,O,19,1,"table",8),t.nI1(13,"async"),t.DNE(14,U,3,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&i){const c=t.sdS(15);t.R7$(7),t.R50("ngModel",o.searchTerm),t.R7$(),t.Y8G("ngIf",t.bMT(9,5,o.loading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(11,7,o.error$)),t.R7$(2),t.Y8G("ngIf",t.bMT(13,9,o.units$))("ngIfElse",c)}},dependencies:[d.MD,d.YU,d.Sq,d.bT,d.Jj,a.YN,a.me,a.BC,a.vS,g.Wk],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.search-box[_ngcontent-%COMP%]{margin-bottom:2rem}.search-input[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 1px 3px #0000001a;border-radius:4px;overflow:hidden}thead[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom:2px solid #ddd}th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;color:#333}td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #eee}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:12px;font-weight:500}.badge-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.badge-gray[_ngcontent-%COMP%]{background-color:#e2e3e5;color:#383d41}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:12px;border:none;border-radius:4px;cursor:pointer;transition:all .3s}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem}.no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.alert-danger[_ngcontent-%COMP%]{padding:1rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px;margin-bottom:2rem}"]})}}return e})();function v(e,s){1&e&&t.nrm(0,"div",3)}function R(e,s){if(1&e&&(t.j41(0,"div",4)(1,"div",5)(2,"div")(3,"strong"),t.EFF(4,"ID:"),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()(),t.j41(7,"div")(8,"strong"),t.EFF(9,"Nome:"),t.k0s(),t.j41(10,"p"),t.EFF(11),t.k0s()(),t.j41(12,"div")(13,"strong"),t.EFF(14,"Tipo:"),t.k0s(),t.j41(15,"p"),t.EFF(16),t.k0s()(),t.j41(17,"div")(18,"strong"),t.EFF(19,"Cidade:"),t.k0s(),t.j41(20,"p"),t.EFF(21),t.k0s()(),t.j41(22,"div")(23,"strong"),t.EFF(24,"Estado:"),t.k0s(),t.j41(25,"p"),t.EFF(26),t.k0s()(),t.j41(27,"div")(28,"strong"),t.EFF(29,"Blindada:"),t.k0s(),t.j41(30,"p"),t.EFF(31),t.k0s()(),t.j41(32,"div")(33,"strong"),t.EFF(34,"Criada em:"),t.k0s(),t.j41(35,"p"),t.EFF(36),t.nI1(37,"date"),t.k0s()(),t.j41(38,"div")(39,"strong"),t.EFF(40,"Atualizada em:"),t.k0s(),t.j41(41,"p"),t.EFF(42),t.nI1(43,"date"),t.k0s()()(),t.j41(44,"div",6)(45,"button",7),t.EFF(46,"Editar"),t.k0s(),t.j41(47,"button",8),t.EFF(48,"Voltar"),t.k0s()()()),2&e){const n=s.ngIf;t.R7$(6),t.JRh(n.id),t.R7$(5),t.JRh(n.name),t.R7$(5),t.JRh(n.type),t.R7$(5),t.JRh(n.city),t.R7$(5),t.JRh(n.state),t.R7$(5),t.JRh(n.isArmored?"Sim":"N\xe3o"),t.R7$(5),t.JRh(t.bMT(37,8,n.createdAt)),t.R7$(6),t.JRh(t.bMT(43,10,n.updatedAt))}}let I=(()=>{class e{constructor(n,i){this.route=n,this.store=i,this.unit$=this.store.select(C),this.loading$=this.store.select(h)}ngOnInit(){const n=Number(this.route.snapshot.paramMap.get("id"));this.store.dispatch(p.HS({id:n}))}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(g.nX),t.rXU(m.il))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-units-detail"]],standalone:!0,features:[t.aNF],decls:7,vars:6,consts:[[1,"detail-container"],["class","spinner",4,"ngIf"],["class","card",4,"ngIf"],[1,"spinner"],[1,"card"],[1,"grid-2"],[1,"actions","mt-3"],[1,"btn-primary"],[1,"btn-secondary"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Detalhes da Unidade"),t.k0s(),t.DNE(3,v,1,0,"div",1),t.nI1(4,"async"),t.DNE(5,R,49,12,"div",2),t.nI1(6,"async"),t.k0s()),2&i&&(t.R7$(3),t.Y8G("ngIf",t.bMT(4,2,o.loading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(6,4,o.unit$)))},dependencies:[d.MD,d.bT,d.Jj,d.vh],styles:[".detail-container[_ngcontent-%COMP%]{padding:1rem}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.grid-2[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#666;font-size:.875rem;margin-bottom:.5rem;text-transform:uppercase}.grid-2[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#333}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem}"]})}}return e})();function T(e,s){if(1&e&&(t.j41(0,"div",26),t.EFF(1),t.k0s()),2&e){const n=s.ngIf;t.R7$(),t.SpI(" ",n," ")}}let M=(()=>{class e{constructor(n,i,o){this.store=n,this.route=i,this.router=o,this.isEdit=!1,this.form={name:"",type:"",city:"",state:"",isArmored:!1},this.unitId=null,this.loading$=this.store.select(h),this.error$=this.store.select(_)}ngOnInit(){this.route.params.subscribe(n=>{n.id&&(this.isEdit=!0,this.unitId=+n.id,this.unitId&&this.store.dispatch(p.HS({id:this.unitId})),this.store.select(C).subscribe(i=>{i&&(this.form={name:i.name,type:i.type,city:i.city,state:i.state,isArmored:i.isArmored})}))})}onSubmit(){this.form.name&&this.form.type&&this.form.city&&this.form.state?(this.store.dispatch(this.isEdit&&this.unitId?p.oy({id:this.unitId,unit:{name:this.form.name,type:this.form.type,city:this.form.city,state:this.form.state,isArmored:this.form.isArmored}}):p.Dq({unit:{name:this.form.name,type:this.form.type,city:this.form.city,state:this.form.state,isArmored:this.form.isArmored}})),setTimeout(()=>{this.router.navigate(["/units"])},1e3)):alert("Nome, Tipo, Cidade e Estado s\xe3o obrigat\xf3rios")}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(m.il),t.rXU(g.nX),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-units-form"]],standalone:!0,features:[t.aNF],decls:48,vars:15,consts:[[1,"container"],[1,"form-header"],["routerLink","/units",1,"btn","btn-secondary"],[1,"form-card"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","placeholder","Ex: Unidade Centro","required","",3,"ngModelChange","ngModel"],[1,"form-row"],["for","type"],["id","type","name","type","required","",3,"ngModelChange","ngModel"],["value",""],["value","Posto"],["value","Centro"],["value","Cl\xednica"],["value","Hospital"],["for","city"],["type","text","id","city","name","city","placeholder","S\xe3o Paulo","required","",3,"ngModelChange","ngModel"],["for","state"],["type","text","id","state","name","state","placeholder","SP","maxlength","2","required","",3,"ngModelChange","ngModel"],["for","isArmored"],["type","checkbox","id","isArmored","name","isArmored",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","routerLink","/units",1,"btn","btn-secondary"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s(),t.j41(4,"button",2),t.EFF(5,"\u2190 Voltar"),t.k0s()(),t.j41(6,"div",3)(7,"form",4),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(8,"div",5)(9,"label",6),t.EFF(10,"Nome da Unidade *"),t.k0s(),t.j41(11,"input",7),t.mxI("ngModelChange",function(r){return t.DH7(o.form.name,r)||(o.form.name=r),r}),t.k0s()(),t.j41(12,"div",8)(13,"div",5)(14,"label",9),t.EFF(15,"Tipo *"),t.k0s(),t.j41(16,"select",10),t.mxI("ngModelChange",function(r){return t.DH7(o.form.type,r)||(o.form.type=r),r}),t.j41(17,"option",11),t.EFF(18,"Selecione um tipo"),t.k0s(),t.j41(19,"option",12),t.EFF(20,"Posto"),t.k0s(),t.j41(21,"option",13),t.EFF(22,"Centro"),t.k0s(),t.j41(23,"option",14),t.EFF(24,"Cl\xednica"),t.k0s(),t.j41(25,"option",15),t.EFF(26,"Hospital"),t.k0s()()(),t.j41(27,"div",5)(28,"label",16),t.EFF(29,"Cidade *"),t.k0s(),t.j41(30,"input",17),t.mxI("ngModelChange",function(r){return t.DH7(o.form.city,r)||(o.form.city=r),r}),t.k0s()(),t.j41(31,"div",5)(32,"label",18),t.EFF(33,"Estado (UF) *"),t.k0s(),t.j41(34,"input",19),t.mxI("ngModelChange",function(r){return t.DH7(o.form.state,r)||(o.form.state=r),r}),t.k0s()()(),t.j41(35,"div",5)(36,"label",20)(37,"input",21),t.mxI("ngModelChange",function(r){return t.DH7(o.form.isArmored,r)||(o.form.isArmored=r),r}),t.k0s(),t.EFF(38," Unidade Blindada "),t.k0s()(),t.j41(39,"div",22)(40,"button",23),t.nI1(41,"async"),t.EFF(42),t.nI1(43,"async"),t.k0s(),t.j41(44,"button",24),t.EFF(45," Cancelar "),t.k0s()()(),t.DNE(46,T,2,1,"div",25),t.nI1(47,"async"),t.k0s()()),2&i&&(t.R7$(3),t.JRh(o.isEdit?"Editar Unidade":"Nova Unidade"),t.R7$(8),t.R50("ngModel",o.form.name),t.R7$(5),t.R50("ngModel",o.form.type),t.R7$(14),t.R50("ngModel",o.form.city),t.R7$(4),t.R50("ngModel",o.form.state),t.R7$(3),t.R50("ngModel",o.form.isArmored),t.R7$(3),t.Y8G("disabled",t.bMT(41,9,o.loading$)),t.R7$(2),t.SpI(" ",t.bMT(43,11,o.loading$)?"Salvando...":"Salvar"," "),t.R7$(4),t.Y8G("ngIf",t.bMT(47,13,o.error$)))},dependencies:[d.MD,d.bT,d.Jj,a.YN,a.qT,a.xH,a.y7,a.me,a.Zm,a.wz,a.BC,a.cb,a.YS,a.tU,a.vS,a.cV,g.Wk],styles:[".container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.form-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 8px #0000001a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 3px #1976d21a}input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem;cursor:pointer}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.alert-danger[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px}"]})}}return e})();const x=[{path:"",component:P},{path:"create",component:M},{path:":id/edit",component:M},{path:":id",component:I}]}}]);