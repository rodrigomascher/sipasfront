"use strict";(self.webpackChunksipas_front=self.webpackChunksipas_front||[]).push([[672],{1672:(j,b,c)=>{c.r(b),c.d(b,{ROLES_ROUTES:()=>P});var d=c(177),i=c(4341),g=c(4008),a=c(5134);const p=(0,a.UX)("roles"),f=(0,a.Mz)(p,e=>e.roles),C=((0,a.Mz)(p,e=>e.selectedRole),(0,a.Mz)(p,e=>e.loading)),_=(0,a.Mz)(p,e=>e.error);(0,a.Mz)(f,e=>e.length);var m=c(486),t=c(4438);function M(e,l){1&e&&(t.j41(0,"div",9)(1,"p"),t.EFF(2,"Carregando cargos..."),t.k0s()())}function R(e,l){if(1&e&&(t.j41(0,"div",10),t.EFF(1),t.k0s()),2&e){const o=l.ngIf;t.R7$(),t.SpI(" ",o," ")}}function E(e,l){if(1&e){const o=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",13)(8,"button",14),t.EFF(9," \u270e Editar "),t.k0s(),t.j41(10,"button",15),t.bIt("click",function(){const n=t.eBV(o).$implicit,s=t.XpG(2);return t.Njj(s.deleteRole(n.id))}),t.EFF(11," \u{1f5d1} Deletar "),t.k0s()()()}if(2&e){const o=l.$implicit;t.R7$(2),t.SpI("#",o.id,""),t.R7$(2),t.JRh(o.name),t.R7$(2),t.JRh(o.description||"-"),t.R7$(2),t.Mz_("routerLink","/roles/",o.id,"/edit")}}function k(e,l){if(1&e&&(t.j41(0,"table",11)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"ID"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Nome"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Descri\xe7\xe3o"),t.k0s(),t.j41(9,"th"),t.EFF(10,"A\xe7\xf5es"),t.k0s()()(),t.j41(11,"tbody"),t.DNE(12,E,12,5,"tr",12),t.k0s()()),2&e){const o=t.XpG();t.R7$(12),t.Y8G("ngForOf",o.filteredRoles)}}function O(e,l){1&e&&(t.j41(0,"div",16)(1,"p"),t.EFF(2,"Nenhum cargo encontrado"),t.k0s()())}let x=(()=>{class e{constructor(o){this.store=o,this.filteredRoles=[],this.searchTerm="",this.roles$=this.store.select(f),this.loading$=this.store.select(C),this.error$=this.store.select(_)}ngOnInit(){this.store.dispatch(m.az()),this.roles$.subscribe(o=>{this.filteredRoles=o})}onSearch(){this.roles$.subscribe(o=>{const r=this.searchTerm.toLowerCase();this.filteredRoles=o.filter(n=>n.name.toLowerCase().includes(r)||n.description&&n.description.toLowerCase().includes(r))})}deleteRole(o){confirm("Tem certeza que deseja deletar este cargo?")&&this.store.dispatch(m.EO({id:o}))}static{this.\u0275fac=function(r){return new(r||e)(t.rXU(a.il))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-roles-list"]],standalone:!0,features:[t.aNF],decls:16,vars:11,consts:[["noData",""],[1,"container"],[1,"header"],["routerLink","/roles/create",1,"btn","btn-primary"],[1,"search-box"],["type","text","placeholder","Buscar por nome...",1,"search-input",3,"ngModelChange","ngModel"],["class","spinner",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","data-table",4,"ngIf","ngIfElse"],[1,"spinner"],[1,"alert","alert-danger"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"actions"],["title","Editar",1,"btn-sm","btn-info",3,"routerLink"],["title","Deletar",1,"btn-sm","btn-danger",3,"click"],[1,"no-data"]],template:function(r,n){if(1&r){const s=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"h1"),t.EFF(3,"Cadastro de Cargos"),t.k0s(),t.j41(4,"button",3),t.EFF(5,"+ Novo Cargo"),t.k0s()(),t.j41(6,"div",4)(7,"input",5),t.mxI("ngModelChange",function(u){return t.eBV(s),t.DH7(n.searchTerm,u)||(n.searchTerm=u),t.Njj(u)}),t.bIt("ngModelChange",function(){return t.eBV(s),t.Njj(n.onSearch())}),t.k0s()(),t.DNE(8,M,3,0,"div",6),t.nI1(9,"async"),t.DNE(10,R,2,1,"div",7),t.nI1(11,"async"),t.DNE(12,k,13,1,"table",8),t.nI1(13,"async"),t.DNE(14,O,3,0,"ng-template",null,0,t.C5r),t.k0s()}if(2&r){const s=t.sdS(15);t.R7$(7),t.R50("ngModel",n.searchTerm),t.R7$(),t.Y8G("ngIf",t.bMT(9,5,n.loading$)),t.R7$(2),t.Y8G("ngIf",t.bMT(11,7,n.error$)),t.R7$(2),t.Y8G("ngIf",t.bMT(13,9,n.roles$))("ngIfElse",s)}},dependencies:[d.MD,d.Sq,d.bT,d.Jj,i.YN,i.me,i.BC,i.vS,g.Wk],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.search-box[_ngcontent-%COMP%]{margin-bottom:2rem}.search-input[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;box-shadow:0 1px 3px #0000001a;border-radius:4px;overflow:hidden}thead[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom:2px solid #ddd}th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;color:#333}td[_ngcontent-%COMP%]{padding:.75rem 1rem;border-bottom:1px solid #eee}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.btn-sm[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:12px;border:none;border-radius:4px;cursor:pointer;transition:all .3s}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#138496}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem}.no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.alert-danger[_ngcontent-%COMP%]{padding:1rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px;margin-bottom:2rem}"]})}}return e})();function v(e,l){1&e&&(t.j41(0,"span",12),t.EFF(1," Nome \xe9 obrigat\xf3rio "),t.k0s())}let h=(()=>{class e{constructor(o,r,n,s){this.fb=o,this.router=r,this.route=n,this.store=s,this.isEdit=!1,this.isSubmitting=!1,this.roleId=null,this.form=this.fb.group({name:["",i.k0.required],description:[""]})}ngOnInit(){this.route.params.subscribe(o=>{o.id&&(this.isEdit=!0,this.roleId=+o.id,this.store.select((e=>(0,a.Mz)(f,l=>l.find(o=>o.id===e)||null))(this.roleId)).subscribe(r=>{r?this.form.patchValue({name:r.name,description:r.description||""}):this.store.dispatch(m.XF({id:this.roleId}))}))})}onSubmit(){if(!this.form.valid)return;this.isSubmitting=!0;const o=this.form.value;this.store.dispatch(this.isEdit&&this.roleId?m.S0({id:this.roleId,role:o}):m.rd({role:o})),setTimeout(()=>{this.router.navigate(["/roles"])},1e3)}onCancel(){this.router.navigate(["/roles"])}static{this.\u0275fac=function(r){return new(r||e)(t.rXU(i.ok),t.rXU(g.Ix),t.rXU(g.nX),t.rXU(a.il))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-roles-form"]],standalone:!0,features:[t.aNF],decls:19,vars:5,consts:[[1,"container"],[1,"form-header"],[1,"form-container",3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Digite o nome do cargo",1,"form-input"],["class","error-text",4,"ngIf"],["for","description"],["id","description","formControlName","description","placeholder","Digite a descri\xe7\xe3o do cargo","rows","4",1,"form-input"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"error-text"]],template:function(r,n){if(1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.j41(4,"form",2),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(5,"div",3)(6,"label",4),t.EFF(7,"Nome *"),t.k0s(),t.nrm(8,"input",5),t.DNE(9,v,2,0,"span",6),t.k0s(),t.j41(10,"div",3)(11,"label",7),t.EFF(12,"Descri\xe7\xe3o"),t.k0s(),t.nrm(13,"textarea",8),t.k0s(),t.j41(14,"div",9)(15,"button",10),t.EFF(16),t.k0s(),t.j41(17,"button",11),t.bIt("click",function(){return n.onCancel()}),t.EFF(18," Cancelar "),t.k0s()()()()),2&r){let s;t.R7$(3),t.SpI("",n.isEdit?"Editar":"Criar"," Cargo"),t.R7$(),t.Y8G("formGroup",n.form),t.R7$(5),t.Y8G("ngIf",(null==(s=n.form.get("name"))?null:s.hasError("required"))&&(null==(s=n.form.get("name"))?null:s.touched)),t.R7$(6),t.Y8G("disabled",!n.form.valid||n.isSubmitting),t.R7$(),t.SpI(" ",n.isSubmitting?"Salvando...":"Salvar"," ")}},dependencies:[d.MD,d.bT,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],styles:[".container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.form-header[_ngcontent-%COMP%]{margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:#333}.form-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 1px 3px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:#333}.form-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 2px #1976d21a}.error-text[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}"]})}}return e})();const P=[{path:"",component:x},{path:"create",component:h},{path:":id/edit",component:h}]}}]);