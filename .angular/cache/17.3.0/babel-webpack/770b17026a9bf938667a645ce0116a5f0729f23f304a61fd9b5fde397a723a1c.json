{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport * as UnitsActions from '../../../store/units/units.actions';\nimport * as UnitsSelectors from '../../../store/units/units.selectors';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction UnitsFormComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const error_r1 = ctx.ngIf;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", error_r1, \" \");\n  }\n}\nexport let UnitsFormComponent = /*#__PURE__*/(() => {\n  class UnitsFormComponent {\n    constructor(store, route, router) {\n      this.store = store;\n      this.route = route;\n      this.router = router;\n      this.isEdit = false;\n      this.form = {\n        name: '',\n        type: '',\n        city: '',\n        state: '',\n        isArmored: false\n      };\n      this.unitId = null;\n      this.loading$ = this.store.select(UnitsSelectors.selectUnitsLoading);\n      this.error$ = this.store.select(UnitsSelectors.selectUnitsError);\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        if (params['id']) {\n          this.isEdit = true;\n          this.unitId = +params['id'];\n          if (this.unitId) {\n            this.store.dispatch(UnitsActions.loadUnitById({\n              id: this.unitId\n            }));\n          }\n          this.store.select(UnitsSelectors.selectSelectedUnit).subscribe(unit => {\n            if (unit) {\n              this.form = {\n                name: unit.name,\n                type: unit.type,\n                city: unit.city,\n                state: unit.state,\n                isArmored: unit.isArmored\n              };\n            }\n          });\n        }\n      });\n    }\n    onSubmit() {\n      if (!this.form.name || !this.form.type || !this.form.city || !this.form.state) {\n        alert('Nome, Tipo, Cidade e Estado são obrigatórios');\n        return;\n      }\n      if (this.isEdit && this.unitId) {\n        const updateDto = {\n          name: this.form.name,\n          type: this.form.type,\n          city: this.form.city,\n          state: this.form.state,\n          isArmored: this.form.isArmored\n        };\n        this.store.dispatch(UnitsActions.updateUnit({\n          id: this.unitId,\n          unit: updateDto\n        }));\n      } else {\n        const createDto = {\n          name: this.form.name,\n          type: this.form.type,\n          city: this.form.city,\n          state: this.form.state,\n          isArmored: this.form.isArmored\n        };\n        this.store.dispatch(UnitsActions.createUnit({\n          unit: createDto\n        }));\n      }\n      setTimeout(() => {\n        this.router.navigate(['/units']);\n      }, 1000);\n    }\n    static {\n      this.ɵfac = function UnitsFormComponent_Factory(t) {\n        return new (t || UnitsFormComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UnitsFormComponent,\n        selectors: [[\"app-units-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 48,\n        vars: 15,\n        consts: [[1, \"container\"], [1, \"form-header\"], [\"routerLink\", \"/units\", 1, \"btn\", \"btn-secondary\"], [1, \"form-card\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"placeholder\", \"Ex: Unidade Centro\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-row\"], [\"for\", \"type\"], [\"id\", \"type\", \"name\", \"type\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"\"], [\"value\", \"Posto\"], [\"value\", \"Centro\"], [\"value\", \"Cl\\u00EDnica\"], [\"value\", \"Hospital\"], [\"for\", \"city\"], [\"type\", \"text\", \"id\", \"city\", \"name\", \"city\", \"placeholder\", \"S\\u00E3o Paulo\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"state\"], [\"type\", \"text\", \"id\", \"state\", \"name\", \"state\", \"placeholder\", \"SP\", \"maxlength\", \"2\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"isArmored\"], [\"type\", \"checkbox\", \"id\", \"isArmored\", \"name\", \"isArmored\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", \"routerLink\", \"/units\", 1, \"btn\", \"btn-secondary\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"alert\", \"alert-danger\"]],\n        template: function UnitsFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.ɵɵtext(3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"button\", 2);\n            i0.ɵɵtext(5, \"\\u2190 Voltar\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 3)(7, \"form\", 4);\n            i0.ɵɵlistener(\"ngSubmit\", function UnitsFormComponent_Template_form_ngSubmit_7_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(8, \"div\", 5)(9, \"label\", 6);\n            i0.ɵɵtext(10, \"Nome da Unidade *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"input\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UnitsFormComponent_Template_input_ngModelChange_11_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.form.name, $event) || (ctx.form.name = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 5)(14, \"label\", 9);\n            i0.ɵɵtext(15, \"Tipo *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"select\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UnitsFormComponent_Template_select_ngModelChange_16_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.form.type, $event) || (ctx.form.type = $event);\n              return $event;\n            });\n            i0.ɵɵelementStart(17, \"option\", 11);\n            i0.ɵɵtext(18, \"Selecione um tipo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"option\", 12);\n            i0.ɵɵtext(20, \"Posto\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"option\", 13);\n            i0.ɵɵtext(22, \"Centro\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"option\", 14);\n            i0.ɵɵtext(24, \"Cl\\u00EDnica\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"option\", 15);\n            i0.ɵɵtext(26, \"Hospital\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(27, \"div\", 5)(28, \"label\", 16);\n            i0.ɵɵtext(29, \"Cidade *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"input\", 17);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UnitsFormComponent_Template_input_ngModelChange_30_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.form.city, $event) || (ctx.form.city = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(31, \"div\", 5)(32, \"label\", 18);\n            i0.ɵɵtext(33, \"Estado (UF) *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(34, \"input\", 19);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UnitsFormComponent_Template_input_ngModelChange_34_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.form.state, $event) || (ctx.form.state = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(35, \"div\", 5)(36, \"label\", 20)(37, \"input\", 21);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UnitsFormComponent_Template_input_ngModelChange_37_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.form.isArmored, $event) || (ctx.form.isArmored = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(38, \" Unidade Blindada \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(39, \"div\", 22)(40, \"button\", 23);\n            i0.ɵɵpipe(41, \"async\");\n            i0.ɵɵtext(42);\n            i0.ɵɵpipe(43, \"async\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(44, \"button\", 24);\n            i0.ɵɵtext(45, \" Cancelar \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(46, UnitsFormComponent_div_46_Template, 2, 1, \"div\", 25);\n            i0.ɵɵpipe(47, \"async\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.isEdit ? \"Editar Unidade\" : \"Nova Unidade\");\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.form.name);\n            i0.ɵɵadvance(5);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.form.type);\n            i0.ɵɵadvance(14);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.form.city);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.form.state);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.form.isArmored);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"disabled\", i0.ɵɵpipeBind1(41, 9, ctx.loading$));\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(43, 11, ctx.loading$) ? \"Salvando...\" : \"Salvar\", \" \");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(47, 13, ctx.error$));\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, i3.AsyncPipe, FormsModule, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MaxLengthValidator, i4.NgModel, i4.NgForm, RouterLink],\n        styles: [\".container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.form-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 8px #0000001a}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 3px #1976d21a}input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem;cursor:pointer}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.alert-danger[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px}\"]\n      });\n    }\n  }\n  return UnitsFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}