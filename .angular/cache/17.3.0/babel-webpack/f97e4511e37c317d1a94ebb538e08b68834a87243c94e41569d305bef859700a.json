{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { selectEmployeeById } from '../../../store/employees/employees.selectors';\nimport * as EmployeesActions from '../../../store/employees/employees.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@angular/common\";\nfunction EmployeesFormComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtext(1, \" Nome \\u00E9 obrigat\\u00F3rio \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeesFormComponent_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtext(1, \" Email \\u00E9 obrigat\\u00F3rio \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployeesFormComponent_span_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtext(1, \" Email inv\\u00E1lido \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let EmployeesFormComponent = /*#__PURE__*/(() => {\n  class EmployeesFormComponent {\n    constructor(fb, router, route, store) {\n      this.fb = fb;\n      this.router = router;\n      this.route = route;\n      this.store = store;\n      this.isEdit = false;\n      this.isSubmitting = false;\n      this.employeeId = null;\n      this.form = this.fb.group({\n        name: ['', Validators.required],\n        email: ['', [Validators.required, Validators.email]],\n        phone: [''],\n        position: ['']\n      });\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        if (params['id']) {\n          this.isEdit = true;\n          this.employeeId = +params['id'];\n          this.store.select(selectEmployeeById(this.employeeId)).subscribe(employee => {\n            if (employee) {\n              this.form.patchValue({\n                name: employee.name,\n                email: employee.email,\n                phone: employee.phone || '',\n                position: employee.position || ''\n              });\n            } else {\n              this.store.dispatch(EmployeesActions.loadEmployeeById({\n                id: this.employeeId\n              }));\n            }\n          });\n        }\n      });\n    }\n    onSubmit() {\n      if (!this.form.valid) return;\n      this.isSubmitting = true;\n      const formValue = this.form.value;\n      if (this.isEdit && this.employeeId) {\n        const updateDto = formValue;\n        this.store.dispatch(EmployeesActions.updateEmployee({\n          id: this.employeeId,\n          employee: updateDto\n        }));\n      } else {\n        const createDto = formValue;\n        this.store.dispatch(EmployeesActions.createEmployee({\n          employee: createDto\n        }));\n      }\n      setTimeout(() => {\n        this.router.navigate(['/employees']);\n      }, 1000);\n    }\n    onCancel() {\n      this.router.navigate(['/employees']);\n    }\n    static {\n      this.ɵfac = function EmployeesFormComponent_Factory(t) {\n        return new (t || EmployeesFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Store));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EmployeesFormComponent,\n        selectors: [[\"app-employees-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 29,\n        vars: 7,\n        consts: [[1, \"container\"], [1, \"form-header\"], [1, \"form-container\", 3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", \"placeholder\", \"Digite o nome do funcion\\u00E1rio\", 1, \"form-input\"], [\"class\", \"error-text\", 4, \"ngIf\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"Digite o email do funcion\\u00E1rio\", 1, \"form-input\"], [\"for\", \"phone\"], [\"type\", \"tel\", \"id\", \"phone\", \"formControlName\", \"phone\", \"placeholder\", \"Digite o telefone\", 1, \"form-input\"], [\"for\", \"position\"], [\"type\", \"text\", \"id\", \"position\", \"formControlName\", \"position\", \"placeholder\", \"Digite o cargo\", 1, \"form-input\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"error-text\"]],\n        template: function EmployeesFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.ɵɵtext(3);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function EmployeesFormComponent_Template_form_ngSubmit_4_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n            i0.ɵɵtext(7, \"Nome *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 5);\n            i0.ɵɵtemplate(9, EmployeesFormComponent_span_9_Template, 2, 0, \"span\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 3)(11, \"label\", 7);\n            i0.ɵɵtext(12, \"Email *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(13, \"input\", 8);\n            i0.ɵɵtemplate(14, EmployeesFormComponent_span_14_Template, 2, 0, \"span\", 6)(15, EmployeesFormComponent_span_15_Template, 2, 0, \"span\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"div\", 3)(17, \"label\", 9);\n            i0.ɵɵtext(18, \"Telefone\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(19, \"input\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\", 3)(21, \"label\", 11);\n            i0.ɵɵtext(22, \"Cargo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(23, \"input\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"div\", 13)(25, \"button\", 14);\n            i0.ɵɵtext(26);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"button\", 15);\n            i0.ɵɵlistener(\"click\", function EmployeesFormComponent_Template_button_click_27_listener() {\n              return ctx.onCancel();\n            });\n            i0.ɵɵtext(28, \" Cancelar \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            let tmp_2_0;\n            let tmp_3_0;\n            let tmp_4_0;\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate1(\"\", ctx.isEdit ? \"Editar\" : \"Criar\", \" Funcion\\u00E1rio\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.form.get(\"name\")) == null ? null : tmp_2_0.hasError(\"required\")) && ((tmp_2_0 = ctx.form.get(\"name\")) == null ? null : tmp_2_0.touched));\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.hasError(\"required\")) && ((tmp_3_0 = ctx.form.get(\"email\")) == null ? null : tmp_3_0.touched));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx.form.get(\"email\")) == null ? null : tmp_4_0.hasError(\"email\")) && ((tmp_4_0 = ctx.form.get(\"email\")) == null ? null : tmp_4_0.touched));\n            i0.ɵɵadvance(10);\n            i0.ɵɵproperty(\"disabled\", !ctx.form.valid || ctx.isSubmitting);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isSubmitting ? \"Salvando...\" : \"Salvar\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i4.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.form-header[_ngcontent-%COMP%]{margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:#333}.form-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 1px 3px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:#333}.form-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 2px #1976d21a}.error-text[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}\"]\n      });\n    }\n  }\n  return EmployeesFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}