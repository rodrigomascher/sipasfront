{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport * as UsersActions from '../../../store/users/users.actions';\nimport * as UsersSelectors from '../../../store/users/users.selectors';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction UsersFormComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"label\", 15);\n    i0.ɵɵtext(2, \"Senha *\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 16);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersFormComponent_div_16_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.form.password, $event) || (ctx_r1.form.password = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.form.password);\n  }\n}\nfunction UsersFormComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"label\", 17)(2, \"input\", 18);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersFormComponent_div_17_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.form.isActive, $event) || (ctx_r1.form.isActive = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Usu\\u00E1rio Ativo \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.form.isActive);\n  }\n}\nfunction UsersFormComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const error_r4 = ctx.ngIf;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", error_r4, \" \");\n  }\n}\nexport let UsersFormComponent = /*#__PURE__*/(() => {\n  class UsersFormComponent {\n    constructor(store, route, router) {\n      this.store = store;\n      this.route = route;\n      this.router = router;\n      this.isEdit = false;\n      this.form = {\n        email: '',\n        name: '',\n        password: '',\n        isActive: true\n      };\n      this.userId = null;\n      this.loading$ = this.store.select(UsersSelectors.selectUsersLoading);\n      this.error$ = this.store.select(UsersSelectors.selectUsersError);\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        if (params['id']) {\n          this.isEdit = true;\n          this.userId = +params['id']; // Convert to number\n          if (this.userId) {\n            this.store.dispatch(UsersActions.loadUserById({\n              id: this.userId\n            }));\n          }\n          this.store.select(UsersSelectors.selectSelectedUser).subscribe(user => {\n            if (user) {\n              this.form = {\n                email: user.email,\n                name: user.name,\n                password: '',\n                isActive: user.isActive\n              };\n            }\n          });\n        }\n      });\n    }\n    onSubmit() {\n      if (!this.form.email || !this.form.name) {\n        alert('Email e Nome são obrigatórios');\n        return;\n      }\n      if (this.isEdit && this.userId) {\n        const updateDto = {\n          email: this.form.email,\n          name: this.form.name,\n          isActive: this.form.isActive\n        };\n        this.store.dispatch(UsersActions.updateUser({\n          id: this.userId,\n          user: updateDto\n        }));\n      } else {\n        if (!this.form.password) {\n          alert('Senha é obrigatória para novo usuário');\n          return;\n        }\n        const createDto = {\n          email: this.form.email,\n          name: this.form.name,\n          password: this.form.password\n        };\n        this.store.dispatch(UsersActions.createUser({\n          user: createDto\n        }));\n      }\n      // Aguarda um pouco antes de voltar para a lista\n      setTimeout(() => {\n        this.router.navigate(['/users']);\n      }, 1000);\n    }\n    static {\n      this.ɵfac = function UsersFormComponent_Factory(t) {\n        return new (t || UsersFormComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UsersFormComponent,\n        selectors: [[\"app-users-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 27,\n        vars: 15,\n        consts: [[1, \"container\"], [1, \"form-header\"], [\"routerLink\", \"/users\", 1, \"btn\", \"btn-secondary\"], [1, \"form-card\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"placeholder\", \"usuario@example.com\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\", \"disabled\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"placeholder\", \"Jo\\u00E3o Silva\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"form-group\", 4, \"ngIf\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", \"routerLink\", \"/users\", 1, \"btn\", \"btn-secondary\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\", \"required\", \"\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"isActive\"], [\"type\", \"checkbox\", \"id\", \"isActive\", \"name\", \"isActive\", 3, \"ngModelChange\", \"ngModel\"], [1, \"alert\", \"alert-danger\"]],\n        template: function UsersFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.ɵɵtext(3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"button\", 2);\n            i0.ɵɵtext(5, \"\\u2190 Voltar\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 3)(7, \"form\", 4);\n            i0.ɵɵlistener(\"ngSubmit\", function UsersFormComponent_Template_form_ngSubmit_7_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(8, \"div\", 5)(9, \"label\", 6);\n            i0.ɵɵtext(10, \"Email *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"input\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersFormComponent_Template_input_ngModelChange_11_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.form.email, $event) || (ctx.form.email = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\", 5)(13, \"label\", 8);\n            i0.ɵɵtext(14, \"Nome *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"input\", 9);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function UsersFormComponent_Template_input_ngModelChange_15_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.form.name, $event) || (ctx.form.name = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(16, UsersFormComponent_div_16_Template, 4, 1, \"div\", 10)(17, UsersFormComponent_div_17_Template, 4, 1, \"div\", 10);\n            i0.ɵɵelementStart(18, \"div\", 11)(19, \"button\", 12);\n            i0.ɵɵpipe(20, \"async\");\n            i0.ɵɵtext(21);\n            i0.ɵɵpipe(22, \"async\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"button\", 13);\n            i0.ɵɵtext(24, \" Cancelar \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(25, UsersFormComponent_div_25_Template, 2, 1, \"div\", 14);\n            i0.ɵɵpipe(26, \"async\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.isEdit ? \"Editar Usu\\u00E1rio\" : \"Novo Usu\\u00E1rio\");\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.form.email);\n            i0.ɵɵproperty(\"disabled\", ctx.isEdit);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.form.name);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.isEdit);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isEdit);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", i0.ɵɵpipeBind1(20, 9, ctx.loading$));\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(22, 11, ctx.loading$) ? \"Salvando...\" : \"Salvar\", \" \");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(26, 13, ctx.error$));\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, i3.AsyncPipe, FormsModule, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.CheckboxControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, RouterLink],\n        styles: [\".container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.form-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 8px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .3s}input[type=text][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 3px #1976d21a}input[type=text][_ngcontent-%COMP%]:disabled, input[type=email][_ngcontent-%COMP%]:disabled, input[type=password][_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}input[type=checkbox][_ngcontent-%COMP%]{margin-right:.5rem;cursor:pointer}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.alert-danger[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb;border-radius:4px}\"]\n      });\n    }\n  }\n  return UsersFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}