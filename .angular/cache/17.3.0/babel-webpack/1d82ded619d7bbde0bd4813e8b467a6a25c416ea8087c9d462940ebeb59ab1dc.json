{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { selectRoleById } from '../../../store/roles/roles.selectors';\nimport * as RolesActions from '../../../store/roles/roles.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@angular/common\";\nfunction RolesFormComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1, \" Nome \\u00E9 obrigat\\u00F3rio \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let RolesFormComponent = /*#__PURE__*/(() => {\n  class RolesFormComponent {\n    constructor(fb, router, route, store) {\n      this.fb = fb;\n      this.router = router;\n      this.route = route;\n      this.store = store;\n      this.isEdit = false;\n      this.isSubmitting = false;\n      this.roleId = null;\n      this.form = this.fb.group({\n        name: ['', Validators.required],\n        description: ['']\n      });\n    }\n    ngOnInit() {\n      this.route.params.subscribe(params => {\n        if (params['id']) {\n          this.isEdit = true;\n          this.roleId = +params['id'];\n          this.store.select(selectRoleById(this.roleId)).subscribe(role => {\n            if (role) {\n              this.form.patchValue({\n                name: role.name,\n                description: role.description || ''\n              });\n            } else {\n              this.store.dispatch(RolesActions.loadRoleById({\n                id: this.roleId\n              }));\n            }\n          });\n        }\n      });\n    }\n    onSubmit() {\n      if (!this.form.valid) return;\n      this.isSubmitting = true;\n      const formValue = this.form.value;\n      if (this.isEdit && this.roleId) {\n        const updateDto = formValue;\n        this.store.dispatch(RolesActions.updateRole({\n          id: this.roleId,\n          role: updateDto\n        }));\n      } else {\n        const createDto = formValue;\n        this.store.dispatch(RolesActions.createRole({\n          role: createDto\n        }));\n      }\n      setTimeout(() => {\n        this.router.navigate(['/roles']);\n      }, 1000);\n    }\n    onCancel() {\n      this.router.navigate(['/roles']);\n    }\n    static {\n      this.ɵfac = function RolesFormComponent_Factory(t) {\n        return new (t || RolesFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Store));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RolesFormComponent,\n        selectors: [[\"app-roles-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 19,\n        vars: 5,\n        consts: [[1, \"container\"], [1, \"form-header\"], [1, \"form-container\", 3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", \"placeholder\", \"Digite o nome do cargo\", 1, \"form-input\"], [\"class\", \"error-text\", 4, \"ngIf\"], [\"for\", \"description\"], [\"id\", \"description\", \"formControlName\", \"description\", \"placeholder\", \"Digite a descri\\u00E7\\u00E3o do cargo\", \"rows\", \"4\", 1, \"form-input\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"error-text\"]],\n        template: function RolesFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n            i0.ɵɵtext(3);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function RolesFormComponent_Template_form_ngSubmit_4_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(5, \"div\", 3)(6, \"label\", 4);\n            i0.ɵɵtext(7, \"Nome *\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 5);\n            i0.ɵɵtemplate(9, RolesFormComponent_span_9_Template, 2, 0, \"span\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 3)(11, \"label\", 7);\n            i0.ɵɵtext(12, \"Descri\\u00E7\\u00E3o\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(13, \"textarea\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"div\", 9)(15, \"button\", 10);\n            i0.ɵɵtext(16);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(17, \"button\", 11);\n            i0.ɵɵlistener(\"click\", function RolesFormComponent_Template_button_click_17_listener() {\n              return ctx.onCancel();\n            });\n            i0.ɵɵtext(18, \" Cancelar \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            let tmp_2_0;\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate1(\"\", ctx.isEdit ? \"Editar\" : \"Criar\", \" Cargo\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.form.get(\"name\")) == null ? null : tmp_2_0.hasError(\"required\")) && ((tmp_2_0 = ctx.form.get(\"name\")) == null ? null : tmp_2_0.touched));\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"disabled\", !ctx.form.valid || ctx.isSubmitting);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isSubmitting ? \"Salvando...\" : \"Salvar\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i4.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.form-header[_ngcontent-%COMP%]{margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;color:#333}.form-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 1px 3px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:#333}.form-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:14px;font-family:inherit}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;box-shadow:0 0 0 2px #1976d21a}.error-text[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}\"]\n      });\n    }\n  }\n  return RolesFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}