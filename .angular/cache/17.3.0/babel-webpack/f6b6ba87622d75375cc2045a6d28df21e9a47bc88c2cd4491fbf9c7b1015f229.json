{"ast":null,"code":"import { createEffect, ofType } from '@ngrx/effects';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport * as DepartmentsActions from './departments.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"../../core/services/departments.service\";\nexport class DepartmentsEffects {\n  constructor(actions$, departmentsService) {\n    this.actions$ = actions$;\n    this.departmentsService = departmentsService;\n    this.loadDepartments$ = createEffect(() => this.actions$.pipe(ofType(DepartmentsActions.loadDepartments), switchMap(() => this.departmentsService.getDepartments().pipe(map(departments => DepartmentsActions.loadDepartmentsSuccess({\n      departments\n    })), catchError(error => of(DepartmentsActions.loadDepartmentsFailure({\n      error: error.message\n    })))))));\n    this.loadDepartmentById$ = createEffect(() => this.actions$.pipe(ofType(DepartmentsActions.loadDepartmentById), switchMap(({\n      id\n    }) => this.departmentsService.getDepartmentById(id).pipe(map(department => DepartmentsActions.loadDepartmentByIdSuccess({\n      department\n    })), catchError(error => of(DepartmentsActions.loadDepartmentByIdFailure({\n      error: error.message\n    })))))));\n    this.createDepartment$ = createEffect(() => this.actions$.pipe(ofType(DepartmentsActions.createDepartment), switchMap(({\n      department\n    }) => this.departmentsService.createDepartment(department).pipe(map(newDepartment => DepartmentsActions.createDepartmentSuccess({\n      department: newDepartment\n    })), catchError(error => of(DepartmentsActions.createDepartmentFailure({\n      error: error.message\n    })))))));\n    this.updateDepartment$ = createEffect(() => this.actions$.pipe(ofType(DepartmentsActions.updateDepartment), switchMap(({\n      id,\n      department\n    }) => this.departmentsService.updateDepartment(id, department).pipe(map(updatedDepartment => DepartmentsActions.updateDepartmentSuccess({\n      department: updatedDepartment\n    })), catchError(error => of(DepartmentsActions.updateDepartmentFailure({\n      error: error.message\n    })))))));\n    this.deleteDepartment$ = createEffect(() => this.actions$.pipe(ofType(DepartmentsActions.deleteDepartment), switchMap(({\n      id\n    }) => this.departmentsService.deleteDepartment(id).pipe(map(() => DepartmentsActions.deleteDepartmentSuccess({\n      id\n    })), catchError(error => of(DepartmentsActions.deleteDepartmentFailure({\n      error: error.message\n    })))))));\n  }\n  static {\n    this.ɵfac = function DepartmentsEffects_Factory(t) {\n      return new (t || DepartmentsEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.DepartmentsService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: DepartmentsEffects,\n      factory: DepartmentsEffects.ɵfac\n    });\n  }\n}","map":{"version":3,"names":["createEffect","ofType","catchError","map","switchMap","of","DepartmentsActions","DepartmentsEffects","constructor","actions$","departmentsService","loadDepartments$","pipe","loadDepartments","getDepartments","departments","loadDepartmentsSuccess","error","loadDepartmentsFailure","message","loadDepartmentById$","loadDepartmentById","id","getDepartmentById","department","loadDepartmentByIdSuccess","loadDepartmentByIdFailure","createDepartment$","createDepartment","newDepartment","createDepartmentSuccess","createDepartmentFailure","updateDepartment$","updateDepartment","updatedDepartment","updateDepartmentSuccess","updateDepartmentFailure","deleteDepartment$","deleteDepartment","deleteDepartmentSuccess","deleteDepartmentFailure","i0","ɵɵinject","i1","Actions","i2","DepartmentsService","factory","ɵfac"],"sources":["C:\\Users\\Admin\\Documents\\SIPAS\\front\\src\\app\\store\\departments\\departments.effects.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport { of } from 'rxjs';\r\nimport { DepartmentsService, Department } from '../../core/services/departments.service';\r\nimport * as DepartmentsActions from './departments.actions';\r\n\r\n@Injectable()\r\nexport class DepartmentsEffects {\r\n  loadDepartments$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(DepartmentsActions.loadDepartments),\r\n      switchMap(() =>\r\n        this.departmentsService.getDepartments().pipe(\r\n          map((departments: Department[]) => DepartmentsActions.loadDepartmentsSuccess({ departments })),\r\n          catchError(error => of(DepartmentsActions.loadDepartmentsFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  loadDepartmentById$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(DepartmentsActions.loadDepartmentById),\r\n      switchMap(({ id }) =>\r\n        this.departmentsService.getDepartmentById(id).pipe(\r\n          map(department => DepartmentsActions.loadDepartmentByIdSuccess({ department })),\r\n          catchError(error => of(DepartmentsActions.loadDepartmentByIdFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  createDepartment$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(DepartmentsActions.createDepartment),\r\n      switchMap(({ department }) =>\r\n        this.departmentsService.createDepartment(department).pipe(\r\n          map(newDepartment => DepartmentsActions.createDepartmentSuccess({ department: newDepartment })),\r\n          catchError(error => of(DepartmentsActions.createDepartmentFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  updateDepartment$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(DepartmentsActions.updateDepartment),\r\n      switchMap(({ id, department }) =>\r\n        this.departmentsService.updateDepartment(id, department).pipe(\r\n          map(updatedDepartment => DepartmentsActions.updateDepartmentSuccess({ department: updatedDepartment })),\r\n          catchError(error => of(DepartmentsActions.updateDepartmentFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  deleteDepartment$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(DepartmentsActions.deleteDepartment),\r\n      switchMap(({ id }) =>\r\n        this.departmentsService.deleteDepartment(id).pipe(\r\n          map(() => DepartmentsActions.deleteDepartmentSuccess({ id })),\r\n          catchError(error => of(DepartmentsActions.deleteDepartmentFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private departmentsService: DepartmentsService\r\n  ) {}\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}