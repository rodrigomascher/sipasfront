{"ast":null,"code":"import { createEffect, ofType } from '@ngrx/effects';\nimport { catchError, map, switchMap } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport * as RolesActions from './roles.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"../../core/services/roles.service\";\nexport class RolesEffects {\n  constructor(actions$, rolesService) {\n    this.actions$ = actions$;\n    this.rolesService = rolesService;\n    this.loadRoles$ = createEffect(() => this.actions$.pipe(ofType(RolesActions.loadRoles), switchMap(() => this.rolesService.getRoles().pipe(map(roles => RolesActions.loadRolesSuccess({\n      roles\n    })), catchError(error => of(RolesActions.loadRolesFailure({\n      error: error.message\n    })))))));\n    this.loadRoleById$ = createEffect(() => this.actions$.pipe(ofType(RolesActions.loadRoleById), switchMap(({\n      id\n    }) => this.rolesService.getRoleById(id).pipe(map(role => RolesActions.loadRoleByIdSuccess({\n      role\n    })), catchError(error => of(RolesActions.loadRoleByIdFailure({\n      error: error.message\n    })))))));\n    this.createRole$ = createEffect(() => this.actions$.pipe(ofType(RolesActions.createRole), switchMap(({\n      role\n    }) => this.rolesService.createRole(role).pipe(map(newRole => RolesActions.createRoleSuccess({\n      role: newRole\n    })), catchError(error => of(RolesActions.createRoleFailure({\n      error: error.message\n    })))))));\n    this.updateRole$ = createEffect(() => this.actions$.pipe(ofType(RolesActions.updateRole), switchMap(({\n      id,\n      role\n    }) => this.rolesService.updateRole(id, role).pipe(map(updatedRole => RolesActions.updateRoleSuccess({\n      role: updatedRole\n    })), catchError(error => of(RolesActions.updateRoleFailure({\n      error: error.message\n    })))))));\n    this.deleteRole$ = createEffect(() => this.actions$.pipe(ofType(RolesActions.deleteRole), switchMap(({\n      id\n    }) => this.rolesService.deleteRole(id).pipe(map(() => RolesActions.deleteRoleSuccess({\n      id\n    })), catchError(error => of(RolesActions.deleteRoleFailure({\n      error: error.message\n    })))))));\n  }\n  static {\n    this.ɵfac = function RolesEffects_Factory(t) {\n      return new (t || RolesEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.RolesService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: RolesEffects,\n      factory: RolesEffects.ɵfac\n    });\n  }\n}","map":{"version":3,"names":["createEffect","ofType","catchError","map","switchMap","of","RolesActions","RolesEffects","constructor","actions$","rolesService","loadRoles$","pipe","loadRoles","getRoles","roles","loadRolesSuccess","error","loadRolesFailure","message","loadRoleById$","loadRoleById","id","getRoleById","role","loadRoleByIdSuccess","loadRoleByIdFailure","createRole$","createRole","newRole","createRoleSuccess","createRoleFailure","updateRole$","updateRole","updatedRole","updateRoleSuccess","updateRoleFailure","deleteRole$","deleteRole","deleteRoleSuccess","deleteRoleFailure","i0","ɵɵinject","i1","Actions","i2","RolesService","factory","ɵfac"],"sources":["C:\\Users\\Admin\\Documents\\SIPAS\\front\\src\\app\\store\\roles\\roles.effects.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { catchError, map, switchMap } from 'rxjs/operators';\r\nimport { of } from 'rxjs';\r\nimport { RolesService, Role } from '../../core/services/roles.service';\r\nimport * as RolesActions from './roles.actions';\r\n\r\n@Injectable()\r\nexport class RolesEffects {\r\n  loadRoles$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(RolesActions.loadRoles),\r\n      switchMap(() =>\r\n        this.rolesService.getRoles().pipe(\r\n          map((roles: Role[]) => RolesActions.loadRolesSuccess({ roles })),\r\n          catchError(error => of(RolesActions.loadRolesFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  loadRoleById$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(RolesActions.loadRoleById),\r\n      switchMap(({ id }) =>\r\n        this.rolesService.getRoleById(id).pipe(\r\n          map(role => RolesActions.loadRoleByIdSuccess({ role })),\r\n          catchError(error => of(RolesActions.loadRoleByIdFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  createRole$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(RolesActions.createRole),\r\n      switchMap(({ role }) =>\r\n        this.rolesService.createRole(role).pipe(\r\n          map(newRole => RolesActions.createRoleSuccess({ role: newRole })),\r\n          catchError(error => of(RolesActions.createRoleFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  updateRole$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(RolesActions.updateRole),\r\n      switchMap(({ id, role }) =>\r\n        this.rolesService.updateRole(id, role).pipe(\r\n          map(updatedRole => RolesActions.updateRoleSuccess({ role: updatedRole })),\r\n          catchError(error => of(RolesActions.updateRoleFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  deleteRole$ = createEffect(() =>\r\n    this.actions$.pipe(\r\n      ofType(RolesActions.deleteRole),\r\n      switchMap(({ id }) =>\r\n        this.rolesService.deleteRole(id).pipe(\r\n          map(() => RolesActions.deleteRoleSuccess({ id })),\r\n          catchError(error => of(RolesActions.deleteRoleFailure({ error: error.message })))\r\n        )\r\n      )\r\n    )\r\n  );\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private rolesService: RolesService\r\n  ) {}\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}